<html ng-app="kanjiApp">

<head>
    <meta charset="utf-8">
    <title>Angular.js Example</title>
    <style>
        @font-face {
            font-family: Pangolin;
            src: url('pangolin.woff');
        }
        .pangolin {
            font-family: Pangolin, Arial, Helvetica;
            font-size: 32px;
        }
        .pangolin14 {
            font-family: Pangolin, Arial, Helvetica;
            font-size: 14px;
        }
        textarea[title='iMeme']{
        width:400px;
        height:200px;
        }
        input[title='iMeaning']{
        width:200px;
        height:50px;
        }
        input[title='kRad']{
        width:60px;
        }
        input[title='kanji']{
        width:60px;
        }
        #answerContainer div{
        float:left;
        margin-right:5px;
        }
    </style>
</head>

<body>

    <div id="nav">
        <ul>
            <li><a href="#/">Home</a>
            </li>
            <li><a href="#/radicalsTest">Radicals</a>
            </li>
            <li><a href="#/kanjiData">Kanji Data</a>
            </li>
        </ul>

    </div>

    <div ng-view=""></div>

    <!--<td><input type="checkbox" ng-model="rad.isKanji" ng-true-value="1" ng-false-value="0"></td>-->

    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/angular-1.2.23/angular.min.js" ></script>
    <script src="js/angular-1.2.23/angular-route.min.js" ></script>
    <script src="js/greatKanji/bootstrap/js/bootstrap.js" ></script>
    <link href="js/greatKanji/bootstrap/css/bootstrap.css" rel="stylesheet"/>
    <link href="js/greatKanji/bootstrap/css/bootstrap-responsive.css" rel="stylesheet"/>

    <script>
        console.log("wtf");
        var kanjiApp = angular.module('kanjiApp', ['ngRoute']),
            controllers = {};

kanjiApp.filter("emptyifblank", function(){ return function(object, query){
    if(!query)
        return {}
    else
        return object;
}});

controllers.mainCtrl = function($scope, restService, basic) {

            $scope.updateKanji = function(item) {
            console.log("update")
                restService.updateEntry('kanji2', item.id, basic.getStringifiedObject(
                "meme", item.meme,
                "radical",item.radical,
                "kanjiRadical",item.kanjiRadical
                ));
            };

            //getEntries("radicals");
            console.log("getting");
            restService.getEntries("radicals").success(function(data) {
                console.log("get success with param"+JSON.stringify(data));
                $scope.k = data;

                //return JSON.stringify(data);
            });
            //console.log($scope.k);

        };

controllers.kanjiDataCtrl = function($scope, restService, basic) {

                    var mysql_real_escape_string = function  (str) {

                    if (str) {
    return str.replace(/[\0\x08\x09\x1a\n\r"'\\\%]/g, function (char) {
        switch (char) {
            case "\0":
                return "\\0";
            case "\x08":
                return "\\b";
            case "\x09":
                return "\\t";
            case "\x1a":
                return "\\z";
            case "\n":
                return "\\n";
            case "\r":
                return "\\r";
            case "\"":
            case "'":
            case "\\":
            case "%":
                return "\\"+char; // prepends a backslash to backslash, percent,
                                  // and double/single quotes
        }
    });
    }
    else{return str}
}

            $scope.updateKanji = function(item) {
            console.log("update")
                restService.updateEntry('kanji2', item.id, basic.getStringifiedObject(
                "meme", mysql_real_escape_string(item.meme),
                "radical",mysql_real_escape_string(item.radical),
                "radIndices",mysql_real_escape_string(item.radIndices),
                "kanjiRadical",mysql_real_escape_string(item.kanjiRadical),
                "kun",item.kun,
                "meaning",mysql_real_escape_string(item.meaning),
                "meaning2",mysql_real_escape_string(item.meaning2),
                "memeMeaning",mysql_real_escape_string(item.memeMeaning),
                "similar",item.similar
                ));
            };

            restService.getEntries("kanji2").success(function(data) {
                $scope.kanji = data;
            });
            restService.getEntries("radicals").success(function(data) {
                $scope.radicals = data;
            });

        };

controllers.radicalCtrl = function($scope, $interval, restService, basic) {

            var stop;

            $scope.test = "Radicals Test!";
            $scope.radArr = [];
            $scope.ans = [];
            $scope.wrongArr = [];
            $scope.idShowing = 0;
            $scope.hideAnswers=false;
            $scope.numAnswered = 0;
            $scope.numCorrect = 0;
            $scope.percentCorrect = "N/A";
            $scope.timeLeft = 15000;



            $scope.init = function() {

                $scope.idShowing = 0;
                $scope.changeRadical(true);

            }

        $scope.beginTimer = function () {
        $scope.timeLeft = 15000;
                stop = $interval(function() {
        if ($scope.timeLeft > 0 ) {
          $scope.timeLeft = $scope.timeLeft - 100;
          //$scope.$apply();
          //console.log("t* "+$scope.timeLeft);
        } else {
          $scope.checkAnswer(null, true);
          //$scope.stopTimer();
        }
      }, 100);

        }

       $scope.stopTimer = function() {
      if (angular.isDefined(stop)) {
        $interval.cancel(stop);
        //stop = undefined;
      }
    };

        $scope.$on('$destroy', function() {
      // Make sure that the interval is destroyed too
      $scope.stopTimer();
      stop = undefined;
    });

        $scope.setPercentCorrect = function () {

        $scope.percentCorrect = ($scope.numCorrect / $scope.numAnswered) *100;
        if (!isNaN($scope.percentCorrect)){
        $scope.percentCorrect = $scope.percentCorrect.toFixed(2) + "%";
        }
        else {
        $scope.percentCorrect = "N/A";
        }

        }

        $scope.checkAnswer = function(a, isKey) {

        var ans;
        //console.log("c"+ (Number(num)-48));

        if (!isKey) {
        ans = a.id;
        }
        else if (a) {
        ans = Number(a);
        }

        if (ans && ans == $scope.id) {
        $scope.result = "Correct! Answer is: "+$scope.meaning;
        console.log("Correct! Answer is: "+$scope.meaning);
        $scope.numCorrect++;
        }
        else if (ans){
        $scope.result = "Wrong! Answer is: "+$scope.meaning;
        //console.log("Wrong! Answer is: "+$scope.meaning +" "+ $scope.radArr[$scope.idShowing].id);
        $scope.wrongArr.push($scope.meaning);
        }
        else {
        $scope.result = "Time up! Answer is: "+$scope.meaning;
        }
        $scope.stopTimer();
        //$scope.hideAnswers=false;
        setTimeout($scope.nextRadical,1000);
        $scope.numAnswered++;
        $scope.setPercentCorrect();
        }

        $scope.populateSimilar = function(i, sim) {

            if (sim) {

              //  restService.getEntries("radicals", "id", sim).success(function(data) {
             //       $scope.similar = data;
              //      $scope.buildOptions(i, $scope.similar);
             //   });
                 $scope.buildOptions(i);
            }

        }

$scope.changeRadical = function(isFirst) {

            //$scope.result = "";
            //$scope.hideAnswers=true;
            $scope.id = $scope.radArr[$scope.idShowing].id;
            $scope.radical = $scope.radArr[$scope.idShowing].radical;
            $scope.meaning = $scope.radArr[$scope.idShowing].meaning;

            if ($scope.radArr[$scope.idShowing].similar) {
                $scope.populateSimilar($scope.idShowing, $scope.radArr[$scope.idShowing].similar);
            }
            else {
            $scope.similar = null;
            $scope.buildOptions($scope.idShowing);
            }

           // }
           if (!isFirst) {
            $scope.$digest();
           }
}

        $scope.nextRadical = function() {

            if ($scope.radArr) {
                if ($scope.idShowing + 1 < $scope.radArr.length - 1) {
                    $scope.idShowing++;
                } else {
                    $scope.idShowing = 0;
                }
                $scope.changeRadical(false);
                return false;
            }
        }

        $scope.buildOptions = function(id, simData) {

        var i, j, remaining, idArr=[], r, mainItem ={}, ans = [];

        $scope.ans = null;

        //put the correct answer in the ans array
        mainItem.id = $scope.radArr[id].id;
        mainItem.meaning = $scope.radArr[id].meaning;
        ans.push(mainItem);

        //record the id seperately
        idArr.push($scope.radArr[id].id);

        //if the item has simData, include these in the ans arr as this makes it harder
        if (simData) {
        $.each(simData , function(index, item){
        ans.push(item);
        idArr.push(item.id);
        });
        /*
        simData.forEach(function (item) {
        ans.push(item);
        idArr.push(item.id);
        });
        */
        }

        remaining = 8 - ans.length;

        while (remaining > 0) {
        r = Math.floor(Math.random() * $scope.radArr.length);
        console.log("r: "+r+" leng: "+$scope.radArr.length);
        if (idArr.indexOf(r) ==-1 && $scope.radArr[r].id && $scope.radArr[r].id !==id) {
        mainItem = {};
        console.log("chosen id: "+$scope.radArr[r].id);
        mainItem.id = $scope.radArr[r].id;
        mainItem.meaning = $scope.radArr[r].meaning;
        ans.push(mainItem);
        idArr.push(r);
        remaining--;
        }

        }
        ans = basic.shuffle(ans);
        $scope.ans = JSON.parse(JSON.stringify(ans));
        //$scope.$digest();
        $scope.beginTimer();
        }

            $scope.previousRadical = function() {

                if ($scope.radArr) {
                    if ($scope.idShowing - 1 >= 0) {
                        $scope.idShowing--;
                    } else {
                        $scope.idShowing = $scope.radArr.length - 1;
                    }
                    $scope.changeRadical();
                }
                return false;
            }



restService.getEntries("radicals").success(function(data) {
console.log("d");
var conv = JSON.stringify(data);
//data.forEach(function(){

//})
var conv2 = conv.substring(3,conv.length-1);
//console.log(conv2);
conv2 = conv2.replace(/\\"/g, '"');
conv2 = conv2.replace('\\"', '"');
conv2 = conv2.replace('e":"\\\\"', 'e":"\\"');
//conv2 = conv2.replace('radical":"\\"","code":"\\""', 'radical":"\"","code":"\""');

//conv2 = conv2.replace(/'/g, "\\'");
console.log(conv2);
//$scope.radArr = JSON.parse('[{"id":"1","radical":"#","code":"#","meaning":"fishhook straightened","similar":";4;"},{"id":"2","radical":"\\"","code":"\\"","meaning":"walking stick","similar":""},{"id":"3","radical":"!","code":"!","meaning":"drop","similar":""},{"id":"4","radical":"$","code":"$","meaning":"fishhook","similar":";1;"},{"id":"5","radical":"&","code":"&","meaning":"divining rod","similar":""},{"id":"6","radical":"%","code":"%","meaning":"clothes hanger","similar":";7;10;"},{"id":"7","radical":")","code":")","meaning":"bound","similar":";10;6;"},{"id":"8","radical":"(","code":"(","meaning":"human legs","similar":""},{"id":"9","radical":"\'","code":"\'","meaning":"animal legs","similar":""},{"id":"10","radical":"*","code":"*","meaning":"bound up","similar":";7;6;"},{"id":"11","radical":"+","code":"+","meaning":"horns","similar":""},{"id":"12","radical":",","code":",","meaning":"by one side","similar":""},{"id":"13","radical":"-","code":"-","meaning":"sabre","similar":";26;"},{"id":"14","radical":".","code":".","meaning":"cliff","similar":";39;60;"},{"id":"15","radical":"0","code":"0","meaning":"umbrella","similar":""},{"id":"16","radical":"\\/","code":"\\/","meaning":"hood","similar":";19;"},{"id":"17","radical":"1","code":"1","meaning":"crown","similar":";48;"},{"id":"18","radical":"2","code":"2","meaning":"top hat","similar":""},{"id":"19","radical":"3","code":"3","meaning":"belt","similar":";16;"},{"id":"20","radical":"4","code":"4","meaning":"ice","similar":""},{"id":"21","radical":"5","code":"5","meaning":"winter ice","similar":""},{"id":"22","radical":"6","code":"6","meaning":"reclining","similar":""},{"id":"23","radical":"7","code":"7","meaning":"arm","similar":""},{"id":"24","radical":"8","code":"8","meaning":"elbow","similar":";63;99;"},{"id":"25","radical":";","code":";","meaning":"shovel","similar":""},{"id":"26","radical":"<","code":"<","meaning":"spear","similar":";13;"},{"id":"27","radical":":","code":":","meaning":"plow","similar":";70;"},{"id":"28","radical":"9","code":"9","meaning":"person","similar":""},{"id":"29","radical":"=","code":"=","meaning":"snare","similar":";30;"},{"id":"30","radical":">","code":">","meaning":"slingshot","similar":";29;"},{"id":"31","radical":"A","code":"A","meaning":"hanko (shortened)","similar":";32;"},{"id":"32","radical":"@","code":"@","meaning":"hanko","similar":";31;"},{"id":"33","radical":"?","code":"?","meaning":"stamp","similar":""},{"id":"34","radical":"B","code":"B","meaning":"fingerprint","similar":""},{"id":"35","radical":"C","code":"C","meaning":"sheaf","similar":""},{"id":"36","radical":"D","code":"D","meaning":"cornucopia","similar":""},{"id":"37","radical":"E","code":"E","meaning":"key","similar":""},{"id":"38","radical":"F","code":"F","meaning":"box","similar":";40;"},{"id":"39","radical":"I","code":"I","meaning":"drag","similar":";14;42;60;"},{"id":"40","radical":"G","code":"G","meaning":"box (left)","similar":";38;"},{"id":"41","radical":"H","code":"H","meaning":"fenceposts","similar":""},{"id":"42","radical":"J","code":"J","meaning":"drag (small)","similar":";39;"},{"id":"43","radical":"K","code":"K","meaning":"tool","similar":""},{"id":"44","radical":"L","code":"L","meaning":"small","similar":""},{"id":"45","radical":"N","code":"N","meaning":"water","similar":""},{"id":"46","radical":"O","code":"O","meaning":"river","similar":""},{"id":"47","radical":"M","code":"M","meaning":"flood","similar":""},{"id":"48","radical":"P","code":"P","meaning":"house","similar":";17;"},{"id":"49","radical":"Q","code":"Q","meaning":"flowers","similar":""},{"id":"50","radical":"S","code":"S","meaning":"animal","similar":""},{"id":"51","radical":"R","code":"R","meaning":"turtle","similar":""},{"id":"52","radical":"U","code":"U","meaning":"path","similar":";56;"},{"id":"53","radical":"T","code":"T","meaning":"meet","similar":";208;"},{"id":"54","radical":"V","code":"V","meaning":"walking legs","similar":";89;"},{"id":"55","radical":"W","code":"W","meaning":"arrow","similar":";85;86;163;"},{"id":"56","radical":"X","code":"X","meaning":"stretch","similar":";52;"},{"id":"57","radical":"[","code":"[","meaning":"pent in","similar":""},{"id":"58","radical":"Y","code":"Y","meaning":"towel","similar":";128;"},{"id":"59","radical":"Z","code":"Z","meaning":"scorpion","similar":""},{"id":"60","radical":"\\\\","code":"\\\\","meaning":"cave","similar":";14;42;39;"},{"id":"61","radical":"]","code":"]","meaning":"state of mind","similar":""},{"id":"62","radical":"^","code":"^","meaning":"hand","similar":""},{"id":"63","radical":"`","code":"`","meaning":"wall","similar":";99;24"},{"id":"64","radical":"a","code":"a","meaning":"go","similar":""},{"id":"65","radical":"_","code":"_","meaning":"genie in the bottle","similar":""},{"id":"66","radical":"b","code":"b","meaning":"flag","similar":""},{"id":"67","radical":"c","code":"c","meaning":"broom","similar":";84;"},{"id":"68","radical":"e","code":"e","meaning":"pinnacle (left)","similar":";75;"},{"id":"69","radical":"f","code":"f","meaning":"cocoon","similar":""},{"id":"70","radical":"h","code":"h","meaning":"receipt","similar":";27;"},{"id":"71","radical":"\\u0100","code":"\\u0100","meaning":"fledgling","similar":";123;76;98;166;"},{"id":"72","radical":"i","code":"i","meaning":"cornstalk","similar":";111;112;118;73;"},{"id":"73","radical":"j","code":"j","meaning":"potato","similar":";111;112;118;72;"},{"id":"74","radical":"k","code":"k","meaning":"shape","similar":""},{"id":"75","radical":"l","code":"l","meaning":"city walls (right)","similar":";68;"},{"id":"76","radical":"n","code":"n","meaning":"owl","similar":";123;71;166;98;"},{"id":"77","radical":"o","code":"o","meaning":"mother","similar":";78;"},{"id":"78","radical":"p","code":"p","meaning":"mother (top)","similar":";77;"},{"id":"79","radical":"r","code":"r","meaning":"tree","similar":""},{"id":"80","radical":"m","code":"m","meaning":"lock of hair","similar":""},{"id":"81","radical":"s","code":"s","meaning":"rice","similar":";149;"},{"id":"82","radical":"t","code":"t","meaning":"cow","similar":";83;"},{"id":"83","radical":"u","code":"u","meaning":"cow","similar":";82;"},{"id":"84","radical":"d","code":"d","meaning":"broom (small)","similar":";67;"},{"id":"85","radical":"x","code":"x","meaning":"quiver","similar":";55;86;163;"},{"id":"86","radical":"y","code":"y","meaning":"fiesta","similar":";55;85;163;"},{"id":"87","radical":"z","code":"z","meaning":"scarf","similar":";90;102;162;"},{"id":"88","radical":"q","code":"q","meaning":"oven fire","similar":""},{"id":"89","radical":"w","code":"w","meaning":"taskmaster","similar":";54;"},{"id":"90","radical":"{","code":"{","meaning":"scarf (bottom)","similar":";89;102;162;"},{"id":"91","radical":"v","code":"v","meaning":"whirlwind","similar":""},{"id":"92","radical":"|","code":"|","meaning":"rising cloud","similar":";103;125;"},{"id":"93","radical":"}","code":"}","meaning":"heaven","similar":""},{"id":"94","radical":"\\u00a1","code":"\\u00a1","meaning":"valentine","similar":""},{"id":"95","radical":"~","code":"~","meaning":"porter","similar":""},{"id":"96","radical":"\\u00a2","code":"\\u00a2","meaning":"two hands","similar":""},{"id":"97","radical":"\\u00a4","code":"\\u00a4","meaning":"missile","similar":";133;"},{"id":"98","radical":"\\u00a5","code":"\\u00a5","meaning":"vulture","similar":";123;76;71;166;"},{"id":"99","radical":"\\u00a6","code":"\\u00a6","meaning":"infant","similar":":63:24;"},{"id":"100","radical":"\\u00a7","code":"\\u00a7","meaning":"bone","similar":""},{"id":"101","radical":"\\u00a9","code":"\\u00a9","meaning":"sunglasses with one of the lenses popped out","similar":";188;"},{"id":"102","radical":"\\u00aa","code":"\\u00aa","meaning":"rag","similar":";87;90;162;"},{"id":"103","radical":"\\u00ab","code":"\\u00ab","meaning":"altar (left)","similar":";125;92;"},{"id":"104","radical":"\\u00a3","code":"\\u00a3","meaning":"shiranai","similar":""},{"id":"105","radical":"\\u00ae","code":"\\u00ae","meaning":"mop","similar":""},{"id":"106","radical":"\\u00af","code":"\\u00af","meaning":"salad","similar":";141;179;154;"},{"id":"107","radical":"\\u00b0","code":"\\u00b0","meaning":"old man","similar":""},{"id":"108","radical":"\\u00b1","code":"\\u00b1","meaning":"paper punch","similar":""},{"id":"109","radical":"\\u00b2","code":"\\u00b2","meaning":"staples","similar":";184;"},{"id":"110","radical":"\\u00b3","code":"\\u00b3","meaning":"waitress","similar":""},{"id":"111","radical":"\\u00b6","code":"\\u00b6","meaning":"bushes","similar":";112;111;72;73;"},{"id":"112","radical":"\\u00b7","code":"\\u00b7","meaning":"bushes (bent to left)","similar":";111;72;118;73;"},{"id":"113","radical":"\\u00b4","code":"\\u00b4","meaning":"earthworm","similar":";181;"},{"id":"114","radical":"\\u00a8","code":"\\u00a8","meaning":"assembly line","similar":""},{"id":"115","radical":"\\u00b8","code":"\\u00b8","meaning":"guillotine","similar":""},{"id":"116","radical":"\\u00b9","code":"\\u00b9","meaning":"sparkler","similar":";134;"},{"id":"117","radical":"\\u00ac","code":"\\u00ac","meaning":"rake","similar":";203;"},{"id":"118","radical":"\\u00b5","code":"\\u00b5","meaning":"grow up","similar":";111;72;73;112;"},{"id":"119","radical":"\\u00ba","code":"\\u00ba","meaning":"mosaic","similar":""},{"id":"120","radical":"\\u00bb","code":"\\u00bb","meaning":"hairpin","similar":""},{"id":"121","radical":"\\u00bc","code":"\\u00bc","meaning":"eye","similar":""},{"id":"122","radical":"\\u00bd","code":"\\u00bd","meaning":"tall","similar":""},{"id":"123","radical":"\\u00be","code":"\\u00be","meaning":"schoolhouse","similar":";98;76;71;"},{"id":"124","radical":"\\u00c1","code":"\\u00c1","meaning":"zoo","similar":";127;"},{"id":"125","radical":"\\u00c3","code":"\\u00c3","meaning":"cloak","similar":";92;103;"},{"id":"126","radical":"\\u00c2","code":"\\u00c2","meaning":"shiranai","similar":""},{"id":"127","radical":"\\u00c0","code":"\\u00c0","meaning":"mending","similar":";124;"},{"id":"128","radical":"\\u00c4","code":"\\u00c4","meaning":"apron","similar":";58;"},{"id":"129","radical":"\\u00bf","code":"\\u00bf","meaning":"parade","similar":";160;161;"},{"id":"130","radical":"\\u00c5","code":"\\u00c5","meaning":"sash","similar":""},{"id":"131","radical":"\\u00c6","code":"\\u00c6","meaning":"eel","similar":""},{"id":"132","radical":"\\u00c7","code":"\\u00c7","meaning":"piglet","similar":";209;"},{"id":"133","radical":"\\u00c9","code":"\\u00c9","meaning":"gully","similar":";97;"},{"id":"134","radical":"\\u00cb","code":"\\u00cb","meaning":"grains of rice","similar":";116;"},{"id":"135","radical":"\\u00cc","code":"\\u00cc","meaning":"saw","similar":""},{"id":"136","radical":"\\u00c8","code":"\\u00c8","meaning":"spool","similar":""},{"id":"137","radical":"\\u00ce","code":"\\u00ce","meaning":"dollar sign (double)","similar":";138;"},{"id":"138","radical":"\\u00cf","code":"\\u00cf","meaning":"dollar sign","similar":";137;"},{"id":"139","radical":"\\u00d0","code":"\\u00d0","meaning":"mailbox","similar":""},{"id":"140","radical":"\\u00d2","code":"\\u00d2","meaning":"silver (simplified)","similar":";140;174;"},{"id":"141","radical":"\\u00d4","code":"\\u00d4","meaning":"celery","similar":";106;179;154;"},{"id":"143","radical":"\\u00d5","code":"\\u00d5","meaning":"resin","similar":""},{"id":"144","radical":"\\u00d6","code":"\\u00d6","meaning":"bonsai","similar":";170;"},{"id":"145","radical":"\\u00d8","code":"\\u00d8","meaning":"teepee","similar":""},{"id":"146","radical":"\\u00d7","code":"\\u00d7","meaning":"sickness","similar":""},{"id":"147","radical":"\\u00d9","code":"\\u00d9","meaning":"purse","similar":";186;"},{"id":"148","radical":"\\u00da","code":"\\u00da","meaning":"shelf","similar":""},{"id":"149","radical":"\\u00ca","code":"\\u00ca","meaning":"wheat","similar":";81;"},{"id":"150","radical":"\\u00cd","code":"\\u00cd","meaning":"haystacks","similar":";202;"},{"id":"151","radical":"\\u00dc","code":"\\u00dc","meaning":"calling card","similar":""},{"id":"152","radical":"\\u00d3","code":"\\u00d3","meaning":"rice seedling","similar":""},{"id":"153","radical":"\\u00dd","code":"\\u00dd","meaning":"hair","similar":";156;"},{"id":"154","radical":"\\u00db","code":"\\u00db","meaning":"scrapbook","similar":";141;179;106;"},{"id":"155","radical":"\\u00de","code":"\\u00de","meaning":"tail feathers","similar":""},{"id":"156","radical":"\\u00df","code":"\\u00df","meaning":"mane","similar":";153;"},{"id":"157","radical":"\\u00e1","code":"\\u00e1","meaning":"brush","similar":";158;"},{"id":"158","radical":"\\u00e2","code":"\\u00e2","meaning":"brush","similar":";157;"},{"id":"159","radical":"\\u00e0","code":"\\u00e0","meaning":"lidded crock","similar":";199;"},{"id":"160","radical":"\\u00e3","code":"\\u00e3","meaning":"thanksgiving","similar":";161;129;"},{"id":"161","radical":"\\u00e4","code":"\\u00e4","meaning":"march","similar":";160;129;"},{"id":"162","radical":"\\u00e6","code":"\\u00e6","meaning":"top hat and scarf","similar":";87;90;102;"},{"id":"163","radical":"\\u00e5","code":"\\u00e5","meaning":"float","similar":";55;85;86;"},{"id":"164","radical":"\\u00e7","code":"\\u00e7","meaning":"sheep","similar":";183;"},{"id":"165","radical":"\\u00e8","code":"\\u00e8","meaning":"feathers","similar":""},{"id":"166","radical":"\\u00e9","code":"\\u00e9","meaning":"birdhouse","similar":";76;123;71;98;"},{"id":"167","radical":"\\u00ea","code":"\\u00ea","meaning":"puzzle","similar":""},{"id":"168","radical":"\\u00eb","code":"\\u00eb","meaning":"banner","similar":""},{"id":"169","radical":"\\u00ec","code":"\\u00ec","meaning":"comb","similar":""},{"id":"170","radical":"\\u00ed","code":"\\u00ed","meaning":"quarter","similar":";144;"},{"id":"171","radical":"\\u00ee","code":"\\u00ee","meaning":"scissors","similar":""},{"id":"172","radical":"\\u00ef","code":"\\u00ef","meaning":"maestro","similar":""},{"id":"173","radical":"\\u00f0","code":"\\u00f0","meaning":"silver","similar":";174;140;"},{"id":"174","radical":"\\u00f1","code":"\\u00f1","meaning":"halo","similar":";173;140;"},{"id":"175","radical":"\\u00f2","code":"\\u00f2","meaning":"christmas tree","similar":""},{"id":"176","radical":"\\u00f3","code":"\\u00f3","meaning":"silage","similar":""},{"id":"177","radical":"\\u00f4","code":"\\u00f4","meaning":"Old West","similar":""},{"id":"178","radical":"\\u00f5","code":"\\u00f5","meaning":"red","similar":""},{"id":"179","radical":"\\u00f6","code":"\\u00f6","meaning":"tub","similar":";141;106;154;"},{"id":"180","radical":"\\u00f7","code":"\\u00f7","meaning":"row","similar":";206;"},{"id":"181","radical":"\\u00f8","code":"\\u00f8","meaning":"mountain goat","similar":";113;"},{"id":"182","radical":"\\u00f9","code":"\\u00f9","meaning":"tiger","similar":";194;"},{"id":"183","radical":"\\u00fa","code":"\\u00fa","meaning":"golden calf","similar":";164;"},{"id":"184","radical":"\\u00fb","code":"\\u00fb","meaning":"staples (lagoon)","similar":";109;"},{"id":"185","radical":"\\u00fc","code":"\\u00fc","meaning":"devil","similar":""},{"id":"186","radical":"\\u00fd","code":"\\u00fd","meaning":"insect","similar":";147;"},{"id":"187","radical":"\\u00fe","code":"\\u00fe","meaning":"pig","similar":";193;"},{"id":"188","radical":"\\u0101","code":"\\u0101","meaning":"sunglasses","similar":";101;"},{"id":"189","radical":"\\u00ff","code":"\\u00ff","meaning":"wool","similar":""},{"id":"190","radical":"\\u0103","code":"\\u0103","meaning":"dog tag","similar":""},{"id":"191","radical":"\\u0104","code":"\\u0104","meaning":"animal tracks","similar":""},{"id":"192","radical":"\\u0105","code":"\\u0105","meaning":"shiranai","similar":""},{"id":"193","radical":"\\u0106","code":"\\u0106","meaning":"skunk","similar":";187;"},{"id":"194","radical":"\\u0107","code":"\\u0107","meaning":"caverns","similar":";182;"},{"id":"195","radical":"\\u0108","code":"\\u0108","meaning":"mist","similar":""},{"id":"196","radical":"\\u0109","code":"\\u0109","meaning":"spring","similar":""},{"id":"197","radical":"\\u010a","code":"\\u010a","meaning":"siesta","similar":""},{"id":"198","radical":"\\u010b","code":"\\u010b","meaning":"rain","similar":""},{"id":"199","radical":"\\u010c","code":"\\u010c","meaning":"muzzle","similar":";159;"},{"id":"200","radical":"\\u010e","code":"\\u010e","meaning":"outhouse","similar":""},{"id":"201","radical":"\\u010d","code":"\\u010d","meaning":"turkey","similar":""},{"id":"202","radical":"\\u0110","code":"\\u0110","meaning":"straw man","similar":";150;"},{"id":"203","radical":"\\u010f","code":"\\u010f","meaning":"sieve","similar":";117;"},{"id":"204","radical":"\\u0111","code":"\\u0111","meaning":"awl","similar":""},{"id":"205","radical":"\\u0112","code":"\\u0112","meaning":"bushel basket","similar":""},{"id":"206","radical":"\\u0113","code":"\\u0113","meaning":"upside down in a row","similar":";180;"},{"id":"207","radical":"\\u0114","code":"\\u0114","meaning":"wealth","similar":""},{"id":"208","radical":"\\u0115","code":"\\u0115","meaning":"orders","similar":";53;"},{"id":"209","radical":"\\u0117","code":"\\u0117","meaning":"piggy bank","similar":";132;"},{"id":"210","radical":"\\u0116","code":"\\u0116","meaning":"double back","similar":""},{"id":"211","radical":"\\u0118","code":"\\u0118","meaning":"jawbone","similar":""},{"id":"212","radical":"\\u0119","code":"\\u0119","meaning":"drum","similar":""},{"id":"213","radical":"\\u011a","code":"\\u011a","meaning":"red pepper","similar":""},{"id":"214","radical":"\\u011c","code":"\\u011c","meaning":"talking cricket","similar":""},{"id":"215","radical":"\\u011b","code":"\\u011b","meaning":"migrating ducks","similar":""},{"id":"216","radical":"\\u011d","code":"\\u011d","meaning":"condor","similar":""},{"id":"217","radical":"\\u011e","code":"\\u011e","meaning":"acupuncturist","similar":""},{"id":"218","radical":"\\u0120","code":"\\u0120","meaning":"turkey coop","similar":";226;"},{"id":"219","radical":"\\u011f","code":"\\u011f","meaning":"graveyard","similar":";220;221;"},{"id":"220","radical":"\\u0121","code":"\\u0121","meaning":"cabbage","similar":";219;221;"},{"id":"221","radical":"\\u0122","code":"\\u0122","meaning":"scarecrow","similar":";219;220"},{"id":"222","radical":"\\u0123","code":"\\u0123","meaning":"locket","similar":""},{"id":"223","radical":"\\u0124","code":"\\u0124","meaning":"funnel","similar":""},{"id":"224","radical":"\\u0125","code":"\\u0125","meaning":"antique","similar":""},{"id":"225","radical":"\\u0126","code":"\\u0126","meaning":"mirror","similar":""},{"id":"226","radical":"\\u0127","code":"\\u0127","meaning":"pegasus","similar":";218;"},{"id":"227","radical":"\\u0128","code":"\\u0128","meaning":"mandala","similar":""},{"id":"228","radical":"\\u0129","code":"\\u0129","meaning":"angel","similar":""},{"id":"229","radical":"\\u012a","code":"\\u012a","meaning":"kazoo","similar":""},{"id":"230","radical":"\\u012b","code":"\\u012b","meaning":"shredder","similar":""},{"id":"231","radical":"\\u012c","code":"\\u012c","meaning":"pup tent","similar":""},{"id":"232","radical":"\\u012e","code":"\\u012e","meaning":"grass skirt","similar":""},{"id":"233","radical":"\\u012d","code":"\\u012d","meaning":"ketchup","similar":""}]');
$scope.radArr = JSON.parse(conv2);

//$scope.radArr = JSON.parse('[{"id":"1","radical":"#","code":"#","meaning":"fishhook straightened","similar":";4;"},{"id":"2","radical":"\\"","code":"\\"","meaning":"walking stick","similar":""},{"id":"3","radical":"!","code":"!","meaning":"drop","similar":""},{"id":"4","radical":"$","code":"$","meaning":"fishhook","similar":";1;"},{"id":"5","radical":"&","code":"&","meaning":"divining rod","similar":""},{"id":"6","radical":"%","code":"%","meaning":"clothes hanger","similar":";7;10;"},{"id":"7","radical":")","code":")","meaning":"bound","similar":";10;6;"},{"id":"8","radical":"(","code":"(","meaning":"human legs","similar":""},{"id":"9","radical":"\'","code":"\'","meaning":"animal legs","similar":""},{"id":"10","radical":"*","code":"*","meaning":"bound up","similar":";7;6;"},{"id":"11","radical":"+","code":"+","meaning":"horns","similar":""},{"id":"12","radical":",","code":",","meaning":"by one side","similar":""},{"id":"13","radical":"-","code":"-","meaning":"sabre","similar":";26;"},{"id":"14","radical":".","code":".","meaning":"cliff","similar":";39;60;"},{"id":"15","radical":"0","code":"0","meaning":"umbrella","similar":""},{"id":"16","radical":"\\/","code":"\\/","meaning":"hood","similar":";19;"},{"id":"17","radical":"1","code":"1","meaning":"crown","similar":";48;"},{"id":"18","radical":"2","code":"2","meaning":"top hat","similar":""},{"id":"19","radical":"3","code":"3","meaning":"belt","similar":";16;"},{"id":"20","radical":"4","code":"4","meaning":"ice","similar":""},{"id":"21","radical":"5","code":"5","meaning":"winter ice","similar":""},{"id":"22","radical":"6","code":"6","meaning":"reclining","similar":""},{"id":"23","radical":"7","code":"7","meaning":"arm","similar":""},{"id":"24","radical":"8","code":"8","meaning":"elbow","similar":";63;99;"},{"id":"25","radical":";","code":";","meaning":"shovel","similar":""},{"id":"26","radical":"<","code":"<","meaning":"spear","similar":";13;"},{"id":"27","radical":":","code":":","meaning":"plow","similar":";70;"},{"id":"28","radical":"9","code":"9","meaning":"person","similar":""},{"id":"29","radical":"=","code":"=","meaning":"snare","similar":";30;"},{"id":"30","radical":">","code":">","meaning":"slingshot","similar":";29;"},{"id":"31","radical":"A","code":"A","meaning":"hanko (shortened)","similar":";32;"},{"id":"32","radical":"@","code":"@","meaning":"hanko","similar":";31;"},{"id":"33","radical":"?","code":"?","meaning":"stamp","similar":""},{"id":"34","radical":"B","code":"B","meaning":"fingerprint","similar":""},{"id":"35","radical":"C","code":"C","meaning":"sheaf","similar":""},{"id":"36","radical":"D","code":"D","meaning":"cornucopia","similar":""},{"id":"37","radical":"E","code":"E","meaning":"key","similar":""},{"id":"38","radical":"F","code":"F","meaning":"box","similar":";40;"},{"id":"39","radical":"I","code":"I","meaning":"drag","similar":";14;42;60;"},{"id":"40","radical":"G","code":"G","meaning":"box (left)","similar":";38;"},{"id":"41","radical":"H","code":"H","meaning":"fenceposts","similar":""},{"id":"42","radical":"J","code":"J","meaning":"drag (small)","similar":";39;"},{"id":"43","radical":"K","code":"K","meaning":"tool","similar":""},{"id":"44","radical":"L","code":"L","meaning":"small","similar":""},{"id":"45","radical":"N","code":"N","meaning":"water","similar":""},{"id":"46","radical":"O","code":"O","meaning":"river","similar":""},{"id":"47","radical":"M","code":"M","meaning":"flood","similar":""},{"id":"48","radical":"P","code":"P","meaning":"house","similar":";17;"},{"id":"49","radical":"Q","code":"Q","meaning":"flowers","similar":""},{"id":"50","radical":"S","code":"S","meaning":"animal","similar":""},{"id":"51","radical":"R","code":"R","meaning":"turtle","similar":""},{"id":"52","radical":"U","code":"U","meaning":"path","similar":";56;"},{"id":"53","radical":"T","code":"T","meaning":"meet","similar":";208;"},{"id":"54","radical":"V","code":"V","meaning":"walking legs","similar":";89;"},{"id":"55","radical":"W","code":"W","meaning":"arrow","similar":";85;86;163;"},{"id":"56","radical":"X","code":"X","meaning":"stretch","similar":";52;"},{"id":"57","radical":"[","code":"[","meaning":"pent in","similar":""},{"id":"58","radical":"Y","code":"Y","meaning":"towel","similar":";128;"},{"id":"59","radical":"Z","code":"Z","meaning":"scorpion","similar":""},{"id":"60","radical":"\\\\","code":"\\\\","meaning":"cave","similar":";14;42;39;"},{"id":"61","radical":"]","code":"]","meaning":"state of mind","similar":""},{"id":"62","radical":"^","code":"^","meaning":"hand","similar":""},{"id":"63","radical":"`","code":"`","meaning":"wall","similar":";99;24"},{"id":"64","radical":"a","code":"a","meaning":"go","similar":""},{"id":"65","radical":"_","code":"_","meaning":"genie in the bottle","similar":""},{"id":"66","radical":"b","code":"b","meaning":"flag","similar":""},{"id":"67","radical":"c","code":"c","meaning":"broom","similar":";84;"},{"id":"68","radical":"e","code":"e","meaning":"pinnacle (left)","similar":";75;"},{"id":"69","radical":"f","code":"f","meaning":"cocoon","similar":""},{"id":"70","radical":"h","code":"h","meaning":"receipt","similar":";27;"},{"id":"71","radical":"\\u0100","code":"\\u0100","meaning":"fledgling","similar":";123;76;98;166;"},{"id":"72","radical":"i","code":"i","meaning":"cornstalk","similar":";111;112;118;73;"},{"id":"73","radical":"j","code":"j","meaning":"potato","similar":";111;112;118;72;"},{"id":"74","radical":"k","code":"k","meaning":"shape","similar":""},{"id":"75","radical":"l","code":"l","meaning":"city walls (right)","similar":";68;"},{"id":"76","radical":"n","code":"n","meaning":"owl","similar":";123;71;166;98;"},{"id":"77","radical":"o","code":"o","meaning":"mother","similar":";78;"},{"id":"78","radical":"p","code":"p","meaning":"mother (top)","similar":";77;"},{"id":"79","radical":"r","code":"r","meaning":"tree","similar":""},{"id":"80","radical":"m","code":"m","meaning":"lock of hair","similar":""},{"id":"81","radical":"s","code":"s","meaning":"rice","similar":";149;"},{"id":"82","radical":"t","code":"t","meaning":"cow","similar":";83;"},{"id":"83","radical":"u","code":"u","meaning":"cow","similar":";82;"},{"id":"84","radical":"d","code":"d","meaning":"broom (small)","similar":";67;"},{"id":"85","radical":"x","code":"x","meaning":"quiver","similar":";55;86;163;"},{"id":"86","radical":"y","code":"y","meaning":"fiesta","similar":";55;85;163;"},{"id":"87","radical":"z","code":"z","meaning":"scarf","similar":";90;102;162;"},{"id":"88","radical":"q","code":"q","meaning":"oven fire","similar":""},{"id":"89","radical":"w","code":"w","meaning":"taskmaster","similar":";54;"},{"id":"90","radical":"{","code":"{","meaning":"scarf (bottom)","similar":";89;102;162;"},{"id":"91","radical":"v","code":"v","meaning":"whirlwind","similar":""},{"id":"92","radical":"|","code":"|","meaning":"rising cloud","similar":";103;125;"},{"id":"93","radical":"}","code":"}","meaning":"heaven","similar":""},{"id":"94","radical":"\\u00a1","code":"\\u00a1","meaning":"valentine","similar":""},{"id":"95","radical":"~","code":"~","meaning":"porter","similar":""},{"id":"96","radical":"\\u00a2","code":"\\u00a2","meaning":"two hands","similar":""},{"id":"97","radical":"\\u00a4","code":"\\u00a4","meaning":"missile","similar":";133;"},{"id":"98","radical":"\\u00a5","code":"\\u00a5","meaning":"vulture","similar":";123;76;71;166;"},{"id":"99","radical":"\\u00a6","code":"\\u00a6","meaning":"infant","similar":":63:24;"},{"id":"100","radical":"\\u00a7","code":"\\u00a7","meaning":"bone","similar":""},{"id":"101","radical":"\\u00a9","code":"\\u00a9","meaning":"sunglasses with one of the lenses popped out","similar":";188;"},{"id":"102","radical":"\\u00aa","code":"\\u00aa","meaning":"rag","similar":";87;90;162;"},{"id":"103","radical":"\\u00ab","code":"\\u00ab","meaning":"altar (left)","similar":";125;92;"},{"id":"104","radical":"\\u00a3","code":"\\u00a3","meaning":"shiranai","similar":""},{"id":"105","radical":"\\u00ae","code":"\\u00ae","meaning":"mop","similar":""},{"id":"106","radical":"\\u00af","code":"\\u00af","meaning":"salad","similar":";141;179;154;"},{"id":"107","radical":"\\u00b0","code":"\\u00b0","meaning":"old man","similar":""},{"id":"108","radical":"\\u00b1","code":"\\u00b1","meaning":"paper punch","similar":""},{"id":"109","radical":"\\u00b2","code":"\\u00b2","meaning":"staples","similar":";184;"},{"id":"110","radical":"\\u00b3","code":"\\u00b3","meaning":"waitress","similar":""},{"id":"111","radical":"\\u00b6","code":"\\u00b6","meaning":"bushes","similar":";112;111;72;73;"},{"id":"112","radical":"\\u00b7","code":"\\u00b7","meaning":"bushes (bent to left)","similar":";111;72;118;73;"},{"id":"113","radical":"\\u00b4","code":"\\u00b4","meaning":"earthworm","similar":";181;"},{"id":"114","radical":"\\u00a8","code":"\\u00a8","meaning":"assembly line","similar":""},{"id":"115","radical":"\\u00b8","code":"\\u00b8","meaning":"guillotine","similar":""},{"id":"116","radical":"\\u00b9","code":"\\u00b9","meaning":"sparkler","similar":";134;"},{"id":"117","radical":"\\u00ac","code":"\\u00ac","meaning":"rake","similar":";203;"},{"id":"118","radical":"\\u00b5","code":"\\u00b5","meaning":"grow up","similar":";111;72;73;112;"},{"id":"119","radical":"\\u00ba","code":"\\u00ba","meaning":"mosaic","similar":""},{"id":"120","radical":"\\u00bb","code":"\\u00bb","meaning":"hairpin","similar":""},{"id":"121","radical":"\\u00bc","code":"\\u00bc","meaning":"eye","similar":""},{"id":"122","radical":"\\u00bd","code":"\\u00bd","meaning":"tall","similar":""},{"id":"123","radical":"\\u00be","code":"\\u00be","meaning":"schoolhouse","similar":";98;76;71;"},{"id":"124","radical":"\\u00c1","code":"\\u00c1","meaning":"zoo","similar":";127;"},{"id":"125","radical":"\\u00c3","code":"\\u00c3","meaning":"cloak","similar":";92;103;"},{"id":"126","radical":"\\u00c2","code":"\\u00c2","meaning":"shiranai","similar":""},{"id":"127","radical":"\\u00c0","code":"\\u00c0","meaning":"mending","similar":";124;"},{"id":"128","radical":"\\u00c4","code":"\\u00c4","meaning":"apron","similar":";58;"},{"id":"129","radical":"\\u00bf","code":"\\u00bf","meaning":"parade","similar":";160;161;"},{"id":"130","radical":"\\u00c5","code":"\\u00c5","meaning":"sash","similar":""},{"id":"131","radical":"\\u00c6","code":"\\u00c6","meaning":"eel","similar":""},{"id":"132","radical":"\\u00c7","code":"\\u00c7","meaning":"piglet","similar":";209;"},{"id":"133","radical":"\\u00c9","code":"\\u00c9","meaning":"gully","similar":";97;"},{"id":"134","radical":"\\u00cb","code":"\\u00cb","meaning":"grains of rice","similar":";116;"},{"id":"135","radical":"\\u00cc","code":"\\u00cc","meaning":"saw","similar":""},{"id":"136","radical":"\\u00c8","code":"\\u00c8","meaning":"spool","similar":""},{"id":"137","radical":"\\u00ce","code":"\\u00ce","meaning":"dollar sign (double)","similar":";138;"},{"id":"138","radical":"\\u00cf","code":"\\u00cf","meaning":"dollar sign","similar":";137;"},{"id":"139","radical":"\\u00d0","code":"\\u00d0","meaning":"mailbox","similar":""},{"id":"140","radical":"\\u00d2","code":"\\u00d2","meaning":"silver (simplified)","similar":";140;174;"},{"id":"141","radical":"\\u00d4","code":"\\u00d4","meaning":"celery","similar":";106;179;154;"},{"id":"143","radical":"\\u00d5","code":"\\u00d5","meaning":"resin","similar":""},{"id":"144","radical":"\\u00d6","code":"\\u00d6","meaning":"bonsai","similar":";170;"},{"id":"145","radical":"\\u00d8","code":"\\u00d8","meaning":"teepee","similar":""},{"id":"146","radical":"\\u00d7","code":"\\u00d7","meaning":"sickness","similar":""},{"id":"147","radical":"\\u00d9","code":"\\u00d9","meaning":"purse","similar":";186;"},{"id":"148","radical":"\\u00da","code":"\\u00da","meaning":"shelf","similar":""},{"id":"149","radical":"\\u00ca","code":"\\u00ca","meaning":"wheat","similar":";81;"},{"id":"150","radical":"\\u00cd","code":"\\u00cd","meaning":"haystacks","similar":";202;"},{"id":"151","radical":"\\u00dc","code":"\\u00dc","meaning":"calling card","similar":""},{"id":"152","radical":"\\u00d3","code":"\\u00d3","meaning":"rice seedling","similar":""},{"id":"153","radical":"\\u00dd","code":"\\u00dd","meaning":"hair","similar":";156;"},{"id":"154","radical":"\\u00db","code":"\\u00db","meaning":"scrapbook","similar":";141;179;106;"},{"id":"155","radical":"\\u00de","code":"\\u00de","meaning":"tail feathers","similar":""},{"id":"156","radical":"\\u00df","code":"\\u00df","meaning":"mane","similar":";153;"},{"id":"157","radical":"\\u00e1","code":"\\u00e1","meaning":"brush","similar":";158;"},{"id":"158","radical":"\\u00e2","code":"\\u00e2","meaning":"brush","similar":";157;"},{"id":"159","radical":"\\u00e0","code":"\\u00e0","meaning":"lidded crock","similar":";199;"},{"id":"160","radical":"\\u00e3","code":"\\u00e3","meaning":"thanksgiving","similar":";161;129;"},{"id":"161","radical":"\\u00e4","code":"\\u00e4","meaning":"march","similar":";160;129;"},{"id":"162","radical":"\\u00e6","code":"\\u00e6","meaning":"top hat and scarf","similar":";87;90;102;"},{"id":"163","radical":"\\u00e5","code":"\\u00e5","meaning":"float","similar":";55;85;86;"},{"id":"164","radical":"\\u00e7","code":"\\u00e7","meaning":"sheep","similar":";183;"},{"id":"165","radical":"\\u00e8","code":"\\u00e8","meaning":"feathers","similar":""},{"id":"166","radical":"\\u00e9","code":"\\u00e9","meaning":"birdhouse","similar":";76;123;71;98;"},{"id":"167","radical":"\\u00ea","code":"\\u00ea","meaning":"puzzle","similar":""},{"id":"168","radical":"\\u00eb","code":"\\u00eb","meaning":"banner","similar":""},{"id":"169","radical":"\\u00ec","code":"\\u00ec","meaning":"comb","similar":""},{"id":"170","radical":"\\u00ed","code":"\\u00ed","meaning":"quarter","similar":";144;"},{"id":"171","radical":"\\u00ee","code":"\\u00ee","meaning":"scissors","similar":""},{"id":"172","radical":"\\u00ef","code":"\\u00ef","meaning":"maestro","similar":""},{"id":"173","radical":"\\u00f0","code":"\\u00f0","meaning":"silver","similar":";174;140;"},{"id":"174","radical":"\\u00f1","code":"\\u00f1","meaning":"halo","similar":";173;140;"},{"id":"175","radical":"\\u00f2","code":"\\u00f2","meaning":"christmas tree","similar":""},{"id":"176","radical":"\\u00f3","code":"\\u00f3","meaning":"silage","similar":""},{"id":"177","radical":"\\u00f4","code":"\\u00f4","meaning":"Old West","similar":""},{"id":"178","radical":"\\u00f5","code":"\\u00f5","meaning":"red","similar":""},{"id":"179","radical":"\\u00f6","code":"\\u00f6","meaning":"tub","similar":";141;106;154;"},{"id":"180","radical":"\\u00f7","code":"\\u00f7","meaning":"row","similar":";206;"},{"id":"181","radical":"\\u00f8","code":"\\u00f8","meaning":"mountain goat","similar":";113;"},{"id":"182","radical":"\\u00f9","code":"\\u00f9","meaning":"tiger","similar":";194;"},{"id":"183","radical":"\\u00fa","code":"\\u00fa","meaning":"golden calf","similar":";164;"},{"id":"184","radical":"\\u00fb","code":"\\u00fb","meaning":"staples (lagoon)","similar":";109;"},{"id":"185","radical":"\\u00fc","code":"\\u00fc","meaning":"devil","similar":""},{"id":"186","radical":"\\u00fd","code":"\\u00fd","meaning":"insect","similar":";147;"},{"id":"187","radical":"\\u00fe","code":"\\u00fe","meaning":"pig","similar":";193;"},{"id":"188","radical":"\\u0101","code":"\\u0101","meaning":"sunglasses","similar":";101;"},{"id":"189","radical":"\\u00ff","code":"\\u00ff","meaning":"wool","similar":""},{"id":"190","radical":"\\u0103","code":"\\u0103","meaning":"dog tag","similar":""},{"id":"191","radical":"\\u0104","code":"\\u0104","meaning":"animal tracks","similar":""},{"id":"192","radical":"\\u0105","code":"\\u0105","meaning":"shiranai","similar":""},{"id":"193","radical":"\\u0106","code":"\\u0106","meaning":"skunk","similar":";187;"},{"id":"194","radical":"\\u0107","code":"\\u0107","meaning":"caverns","similar":";182;"},{"id":"195","radical":"\\u0108","code":"\\u0108","meaning":"mist","similar":""},{"id":"196","radical":"\\u0109","code":"\\u0109","meaning":"spring","similar":""},{"id":"197","radical":"\\u010a","code":"\\u010a","meaning":"siesta","similar":""},{"id":"198","radical":"\\u010b","code":"\\u010b","meaning":"rain","similar":""},{"id":"199","radical":"\\u010c","code":"\\u010c","meaning":"muzzle","similar":";159;"},{"id":"200","radical":"\\u010e","code":"\\u010e","meaning":"outhouse","similar":""},{"id":"201","radical":"\\u010d","code":"\\u010d","meaning":"turkey","similar":""},{"id":"202","radical":"\\u0110","code":"\\u0110","meaning":"straw man","similar":";150;"},{"id":"203","radical":"\\u010f","code":"\\u010f","meaning":"sieve","similar":";117;"},{"id":"204","radical":"\\u0111","code":"\\u0111","meaning":"awl","similar":""},{"id":"205","radical":"\\u0112","code":"\\u0112","meaning":"bushel basket","similar":""},{"id":"206","radical":"\\u0113","code":"\\u0113","meaning":"upside down in a row","similar":";180;"},{"id":"207","radical":"\\u0114","code":"\\u0114","meaning":"wealth","similar":""},{"id":"208","radical":"\\u0115","code":"\\u0115","meaning":"orders","similar":";53;"},{"id":"209","radical":"\\u0117","code":"\\u0117","meaning":"piggy bank","similar":";132;"},{"id":"210","radical":"\\u0116","code":"\\u0116","meaning":"double back","similar":""},{"id":"211","radical":"\\u0118","code":"\\u0118","meaning":"jawbone","similar":""},{"id":"212","radical":"\\u0119","code":"\\u0119","meaning":"drum","similar":""},{"id":"213","radical":"\\u011a","code":"\\u011a","meaning":"red pepper","similar":""},{"id":"214","radical":"\\u011c","code":"\\u011c","meaning":"talking cricket","similar":""},{"id":"215","radical":"\\u011b","code":"\\u011b","meaning":"migrating ducks","similar":""},{"id":"216","radical":"\\u011d","code":"\\u011d","meaning":"condor","similar":""},{"id":"217","radical":"\\u011e","code":"\\u011e","meaning":"acupuncturist","similar":""},{"id":"218","radical":"\\u0120","code":"\\u0120","meaning":"turkey coop","similar":";226;"},{"id":"219","radical":"\\u011f","code":"\\u011f","meaning":"graveyard","similar":";220;221;"},{"id":"220","radical":"\\u0121","code":"\\u0121","meaning":"cabbage","similar":";219;221;"},{"id":"221","radical":"\\u0122","code":"\\u0122","meaning":"scarecrow","similar":";219;220"},{"id":"222","radical":"\\u0123","code":"\\u0123","meaning":"locket","similar":""},{"id":"223","radical":"\\u0124","code":"\\u0124","meaning":"funnel","similar":""},{"id":"224","radical":"\\u0125","code":"\\u0125","meaning":"antique","similar":""},{"id":"225","radical":"\\u0126","code":"\\u0126","meaning":"mirror","similar":""},{"id":"226","radical":"\\u0127","code":"\\u0127","meaning":"pegasus","similar":";218;"},{"id":"227","radical":"\\u0128","code":"\\u0128","meaning":"mandala","similar":""},{"id":"228","radical":"\\u0129","code":"\\u0129","meaning":"angel","similar":""},{"id":"229","radical":"\\u012a","code":"\\u012a","meaning":"kazoo","similar":""},{"id":"230","radical":"\\u012b","code":"\\u012b","meaning":"shredder","similar":""},{"id":"231","radical":"\\u012c","code":"\\u012c","meaning":"pup tent","similar":""},{"id":"232","radical":"\\u012e","code":"\\u012e","meaning":"grass skirt","similar":""},{"id":"233","radical":"\\u012d","code":"\\u012d","meaning":"ketchup","similar":""}]');
//console.log(typeof conv2);
//$scope.radArr = eval(conv2);
/*
conv2 = JSON.parse(conv2)
$.each(conv2, function(index, item) {
//console.log(item);
$scope.radArr.push(item);

});
*/
$scope.radArr = basic.shuffle($scope.radArr);
$scope.init();
});

           angular.element(window).bind('keypress', function (e) {

    var numPressed = Number(e.keyCode)-49, id = Number($("#answerContainer input[title='"+numPressed+"']").attr("id"));

    console.log("r: "+$scope.id + " guess: "+ id + " n: "+numPressed);
    if (!isNaN(id)) {
          $scope.checkAnswer(id, true);
          }

    });


        $scope.$on('$destroy', function() {
        angular.element(window).unbind('keypress');

        });

        };


        kanjiApp.controller(controllers); //controller


        kanjiApp.factory('restService', function($http) {

            return {

                postEntry: function(table, postData) {

                    $http.post('/greatKanji/rest/' + table, postData).success(function(data) {
                        console.log("post success" + data);
                    });

                },

                getJSONfile: function(name) {

                    $http.get(name).success(function(data) {
                        var jdata, x = 0;
                        console.log("success json file" + JSON.stringify(data.Workbook.Worksheet[0].Table.Row));
                        $scope.r = data.Workbook.Worksheet[0].Table.Row;
                        $.each($scope.r , function(index, item){
                            x++;
                            jdata = JSON.stringify(returnRJSONItem(item));
                            console.log(x + " " + jdata);
                            postInDB('radicals', jdata);
                        });
                        /*
                        $scope.r.forEach(function(item, index) {
                            x++;
                            jdata = JSON.stringify(returnRJSONItem(item));
                            console.log(x + " " + jdata);
                            postInDB('radicals', jdata);
                        });
                        */
                    });

                },

                getEntries: function(table, param, val) {

                    var url = 'js/greatKanji/rest/' + table;
                   url ='js/greatKanji/rest/index.php';
console.log(url);
                    if (param && val) {
                        url += '?' + param + '=' + val;
                    }
                    console.log("url/n" + url);

                    if (table) {
                        return $http.get(url);
                    }
                },

                //get all

                updateEntry: function(table, id, putData) {

                    var url = '/greatKanji/rest/';

                    if (table && id && putData) {
                        url += table + '/' + id;
                        $http.put(url, putData).success(function(data) {
                            console.log("put success" + data);
                        });
                    }

                },

                deleteEntry: function(table, id) {
                    var url = '/greatKanji/rest/';

                    if (table && id && putData) {

                        $http.delete('/rest/kanji2/2').success(function(data) {
                            console.log("delete success" + data);
                        });
                    }
                }
            }

        });

        kanjiApp.factory('basic', function() {

            return {

                 shuffle : function(array) {
  var currentIndex = array.length, temporaryValue, randomIndex ;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
},

                getKanjiJSONItem: function(item, i) {

                    return {
                        kanji: ((item.Cell[1] || {}).Data || {}).text,
                        onR: ((item.Cell[2] || {}).Data || {}).text,
                        kun: ((item.Cell[4] || {}).Data || {}).text,
                        romkun: ((item.Cell[3] || {}).Data || {}).text,
                        kLevel: String(i),
                        meaning: ((item.Cell[5] || {}).Data || {}).text

                    }

                },

                getStringifiedObject: function() {

                    var o = {},
                        x;

                    for (x = 0; x <= arguments.length - 1; x++) {

                        if (x % 2 == 0) {
                            o[arguments[x]] = arguments[x + 1];
                        }

                    }

                    return JSON.stringify(o);

                },

                getRadicalJSONItem: function(item) {

                    return {
                        radical: ((item.Cell || {}).Data || {}).text,
                        code: ((item.Cell || {}).Data || {}).text
                    }

                }
            }
        });

        kanjiApp.config(['$routeProvider',
            function($routeProvider) {
                $routeProvider.
                when('/home', {
                    templateUrl: 'partials/home.html',
                    controller: 'mainCtrl'
                }).
                when('/radicalsTest', {
                    templateUrl: 'partials/radical.html',
                    controller: 'radicalCtrl'
                }).
                when('/kanjiData', {
                    templateUrl: 'partials/kanjiData.html',
                    controller: 'kanjiDataCtrl'
                }).
                otherwise({
                    redirectTo: '/'
                });
            }
        ]);
    </script>
</body>

</html>
